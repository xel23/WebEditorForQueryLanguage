{"code":"!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=14)}([function(t,e){t.exports=class{constructor(t,e,s){this.type=t,this.begin=e,this.end=s}}},function(t,e,s){const i=s(0),r=s(2);t.exports=class extends i{constructor(t,e){super(\"NegativeSingleValue\",e.begin,e.end),this.minus=t,e instanceof r?(this.left_lexeme=e.leftVal.lexeme,this.left_lexeme_begin=e.leftVal.begin,this.left_lexeme_end=e.leftVal.end,this.left_literal=e.leftVal.literal,this.right_lexeme=e.rightVal.lexeme,this.right_lexeme_begin=e.rightVal.begin,this.right_lexeme_end=e.rightVal.end,this.right_literal=e.rightVal.literal,this.vr_operator=e.operator,this.begin=e.leftVal.begin,this.end=e.rightVal.end):(this.lexeme=e.lexeme,this.literal=e.literal)}}},function(t,e){t.exports=class{constructor(t,e,s){this.type=\"ValueRange\",this.leftVal=t,this.operator=e,this.rightVal=s,this.begin=t.begin,this.end=s.end}}},function(t,e){t.exports=class{constructor(t,e){this.type=\"Unary\",this.operator=t,this.right=e}}},function(t,e){t.exports=class{constructor(t,e,s){this.type=\"Binary\",this.left=t,this.operator=e,this.right=s}}},function(t,e,s){const i=s(0),r=s(6);t.exports=class extends i{constructor(t,e,s){super(\"Has\",t.begin,s.end),this.key=t,this.key.type=\"key\",this.operator=e,this.value=[],void 0!==arguments[3]?this.value.push(new r(s,arguments[3])):this.value.push(new r(s))}addAttribute(t,e){this.value.push(e),this.value.push(new r(t)),this.end=t.end}}},function(t,e,s){const i=s(1);t.exports=class{constructor(t){this.type=\"TEXT\"===t.type?\"TEXT\":\"Attribute\",this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end,t instanceof i&&(this.begin=t.minus.end,this.operator=t.minus),void 0!==arguments[1]&&(this.operator=arguments[1])}}},function(t,e,s){const i=s(0),r=s(2),n=s(17);t.exports=class extends i{constructor(t,e,s){super(\"CategorizedFilter\",t.begin,s instanceof r?s.rightVal.end:s.end),this.attribute=t,this.operator=e,this.attributeFilter=[],this.attributeFilter.push(new n(s))}addAttributeFilter(t,e){this.end=t instanceof r?t.rightVal.end:t.end,this.attributeFilter.push(e),this.attributeFilter.push(new n(t))}}},function(t,e){const s=Object.freeze({TRUE:!0,FALSE:!1,NULL:null,WORD:\"WORD\",COMPLEX_VALUE:\"COMPLEX_VALUE\",SIMPLE_VALUE:\"SIMPLE_VALUE\",QUOTED_TEXT:\"QUOTED_TEXT\",ATTRIBUTE:\"ATTRIBUTE\",SORT_ATTRIBUTE:\"SORT_ATTRIBUTE\",SINGLE_VALUE:\"SINGLE_VALUE\",OPERATOR:\"OPERATOR\",TEXT:\"TEXT\"});t.exports=s},function(t,e,s){const i=s(0),r=s(18);t.exports=class extends i{constructor(t,e,s){super(\"Sort\",t.begin,s.end),this.key=t,this.key.type=\"key\",this.operator=e,this.value=[],void 0!==arguments[3]?(this.value.push(new r(s,arguments[3])),this.end=arguments[3].end):this.value.push(new r(s))}addValue(t,e){this.value.push(e),void 0!==arguments[2]?(this.value.push(new r(t,arguments[2])),this.end=arguments[2].end):(this.value.push(new r(t)),this.end=t.end)}}},function(t,e){t.exports=class{constructor(t,e,s){this.type=\"Grouping\",this.left=t,this.expr=e,this.right=s}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e){super(\"PositiveSingleValue\",e.begin,e.end),this.operator=t,this.lexeme=e.lexeme,this.literal=e.literal}}},function(t,e){const s=Object.freeze({LEFT_PAREN:\"(\",RIGHT_PAREN:\")\",DOT:\".\",COLON:\":\",EOF:\"(end)\",NOT:\"not\",AND:\"and\",OR:\"or\"});t.exports=s},function(t,e){t.exports=class{constructor(t,e,s){this.type=t,this.lexeme=e,this.literal=s,void 0!==arguments[3]&&(this.begin=arguments[3],this.end=arguments[4])}toString(){return this.type+\" \"+this.lexeme+\" \"+this.literal}}},function(t,e,s){new(s(15))(document.getElementById(\"inQuery\"),document.getElementById(\"result\"))},function(t,e,s){const i=s(16),r=s(19),n=s(25),h=s(26);t.exports=class{constructor(t,e){this.field=t,this.tree=e,this.cursor=new n(this.field),this.ur=new h,this.ur.addState(\"\",0),this.field.addEventListener&&this.field.addEventListener(\"input\",this.listener.bind(this),!1),document.onkeydown=this.keyPress.bind(this)}listener(){try{let t=this.field.innerText.replace(/\\n/g,\"\"),e=this.cursor.position;0!==arguments[0]&&this.ur.addState(t,e);let s=new r(t).parse();this.tree.value=JSON.stringify(s,null,4);let n=new i(s,t);this.field.innerHTML=n.getResult(),this.cursor.position=e}catch(t){this.tree.value=t}}keyPress(t){if(90===t.keyCode&&t.ctrlKey&&t.shiftKey){let t=this.ur.redo();-1!==t&&(this.field.innerText=t.line,this.cursor.position=t.pos,this.listener(0).bind(this))}else if(90===t.keyCode&&t.ctrlKey){let t=this.ur.undo();-1!==t&&(this.field.innerText=t.line,this.cursor.position=t.pos,this.listener(0).bind(this))}else if(t.altKey&&38===t.keyCode){let e=document.createRange();if(window.getSelection().anchorNode===this.field)return void t.preventDefault();3===window.getSelection().anchorNode.nodeType?e.selectNode(window.getSelection().anchorNode.parentNode):e.selectNode(window.getSelection().anchorNode),document.getSelection().removeAllRanges(),document.getSelection().addRange(e),t.preventDefault()}}}},function(t,e,s){const i=s(3),r=s(4),n=s(5),h=s(7),o=s(9),a=s(10),l=s(11),u=s(1);t.exports=class{constructor(t,e){this.resString=this.traverse(t,e)}wrapper(t,e){return'<span class=\"'+e+'\">'+t+\"</span>\"}divWrapper(){return void 0!==arguments[0]?'<div class=\"treeWrapper '+arguments[0]+'\">':\"</div>\"}traverse(t,e){let s=\"\";if((t instanceof r||t instanceof a||t instanceof n||t instanceof o||t instanceof h||t instanceof u||t instanceof l)&&(s+=this.divWrapper(t.type)),t instanceof a)s+=this.wrapper(e.substring(t.left.begin,t.left.end),\"Parentheses\"),s+=this.traverse(t.expr,e),s+=this.wrapper(e.substring(t.right.begin,t.right.end),\"Parentheses\");else for(let r in t)if(!(t[r]instanceof Object)||t[r]instanceof i||\"minus\"===r||t[r]instanceof a||\"attributeFilter\"===r||\"value\"===r){if(t[r]instanceof a)s+=this.wrapper(e.substring(t[r].left.begin,t[r].left.end),\"Parentheses\"),s+=this.traverse(t[r].expr,e),s+=this.wrapper(e.substring(t[r].right.begin,t[r].right.end),\"Parentheses\");else if(\"type\"===r)switch(t.type){case\"QuotedText\":case\"NegativeText\":case\"key\":case\"Attribute\":case\"Value\":case\"ValueRange\":case\"TEXT\":s+=this.wrapper(e.substring(t.begin,t.end),t.type);break;case\"NegativeSingleValue\":s+=this.wrapper(e.substring(t.minus.begin,t.minus.end),\"operator\"),s+=this.wrapper(e.substring(t.begin,t.end),t.type);break;case\"PositiveSingleValue\":s+=this.wrapper(e.substring(t.operator.begin,t.operator.end),\"operator\"),s+=this.wrapper(e.substring(t.begin,t.end),t.type);break;case\"OPERATOR\":case\":\":case\"-\":\"begin\"in t?s+=this.wrapper(e.substring(t.begin,t.end),\"operator\"):\"or\"===t.lexeme&&(s+=this.wrapper(e.substring(t.begin,t.end),\"operator\"))}else if(\"attributeFilter\"===r||\"value\"===r){\"operator\"in t[r][0]&&(s+=this.wrapper(e.substring(t[r][0].operator.begin,t[r][0].operator.end),\"operator\")),s+=this.wrapper(e.substring(t[r][0].begin,t[r][0].end),t[r][0].type),\"order\"in t[r][0]&&(s+=this.wrapper(e.substring(t[r][0].order.begin,t[r][0].order.end),\"order\"));for(let i=1;i<t[r].length;i++)s+=this.wrapper(e.substring(t[r][i].begin,t[r][i].end),\"operator\"),i++,\"operator\"in t[r][i]&&(s+=this.wrapper(e.substring(t[r][i].operator.begin,t[r][i].operator.end),\"operator\")),s+=this.wrapper(e.substring(t[r][i].begin,t[r][i].end),t[r][i].type),\"order\"in t[r][i]&&(s+=this.wrapper(e.substring(t[r][i].order.begin,t[r][i].order.end),\"order\"))}}else s+=this.traverse(t[r],e);return(t instanceof r||t instanceof a||t instanceof n||t instanceof o||t instanceof h||t instanceof u||t instanceof l)&&(s+=this.divWrapper()),s}getResult(){return this.resString}}},function(t,e,s){const i=s(2),r=s(1),n=s(8);t.exports=class{constructor(t){t instanceof i?(this.type=\"ValueRange\",this.left_lexeme=t.leftVal.lexeme,this.left_lexeme_begin=t.leftVal.begin,this.left_lexeme_end=t.leftVal.end,this.left_literal=t.leftVal.literal,this.right_lexeme=t.rightVal.lexeme,this.right_lexeme_begin=t.rightVal.begin,this.right_lexeme_end=t.rightVal.end,this.right_literal=t.rightVal.literal,this.vr_operator=t.operator,this.begin=t.leftVal.begin,this.end=t.rightVal.end):t instanceof r?(this.type=t.type,this.operator=t.minus,void 0!==t.left_lexeme?(this.left_lexeme=t.left_lexeme,this.left_lexeme_begin=t.left_lexeme_begin,this.left_lexeme_end=t.left_lexeme_end,this.left_literal=t.left_literal,this.right_lexeme=t.right_lexeme,this.right_lexeme_begin=t.right_lexeme_begin,this.right_lexeme_end=t.right_lexeme_end,this.right_literal=t.right_literal,this.vr_operator=t.vr_operator,this.begin=t.begin,this.end=t.end):(this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end)):(this.type=\"WORD\"===t.type?\"Value\":t.type,t.type===n.TEXT&&(this.type=n.TEXT),this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end)}}},function(t,e){t.exports=class{constructor(t){this.type=t.type,this.lexeme=t.lexeme,this.literal=t.literal,this.begin=t.begin,this.end=t.end,void 0!==arguments[1]&&(this.order=arguments[1])}}},function(t,e,s){const i=s(20),r=s(12),n=s(8),h=s(21),o=s(13),a=s(4),l=s(3),u=s(10),c=s(5),d=s(22),p=s(23),f=s(11),g=s(1),b=s(2),T=s(7),k=s(9),x=s(24),y=s(6);t.exports=class{constructor(t){this.str=t;let e=new i(this.str);this.tokens=e.scanTokens(),this.current=0}getTree(){return this.orExpression()}parse(){if(0===this.str.length)return this.str;let t;try{t=this.getTree()}catch(e){t=new x(new o(\"TEXT\",this.str.substring(0,this.tokens[this.current-1].end),this.str.substring(0,this.tokens[this.current-1].end),0,this.tokens[this.current-1].end))}for(;this.current<this.tokens.length-1;){let e,s=this.current,i=new o(\"OPERATOR\",\"and\",\"and\");try{((e=this.getTree())instanceof o||e instanceof b)&&(e=new x(new o(\"TEXT\",this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.tokens[s].begin,this.tokens[this.current-1].end))),t=new a(t,i,e)}catch(e){t=new a(t,i,new x(new o(\"TEXT\",this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.str.substring(this.tokens[s].begin,this.tokens[this.current-1].end),this.tokens[s].begin,this.tokens[this.current-1].end)))}}return t instanceof o?t.type=n.TEXT:t instanceof b&&(t=new x(new o(\"TEXT\",this.str,this.str,0,this.str.length))),t}orExpression(){let t=this.andExpression(),e=!1;for(;this.matchOperator(r.OR);){let s,i=this.previous(),r=this.current;i.type=\"OPERATOR\";try{null!==(s=this.andExpression())?(s.type===n.WORD&&(s.type=n.TEXT),t=new a(t,i,s)):e=!0}catch(e){t=new a(t,i,new x(new o(\"TEXT\",this.str.substring(this.tokens[r].begin,this.tokens[this.current-1].end),this.str.substring(this.tokens[r].begin,this.tokens[this.current-1].end),this.tokens[r].begin,this.tokens[this.current-1].end)))}}return e&&this.current--,t}andExpression(){let t=this.andOperand();if(null===t)return t;t.type===n.WORD&&this.error(\"AndOperand can not be WORD\\n\",t.begin);let e=!1;for(;this.matchOperator(r.AND);){let s,i=this.previous(),r=this.current;i.type=\"OPERATOR\";try{null!==(s=this.andOperand())?(s.type===n.WORD&&(s.type=n.TEXT),t instanceof T||t instanceof c||t instanceof k||t instanceof f||t instanceof g||t instanceof u||this.error(\"Missing parentheses before 'and' operator:\\n\",i.begin-1),t=new a(t,i,s)):e=!0}catch(e){t=new a(t,i,new x(new o(\"TEXT\",this.str.substring(this.tokens[r].begin,this.tokens[this.current-1].end),this.str.substring(this.tokens[r].begin,this.tokens[this.current-1].end),this.tokens[r].begin,this.tokens[this.current-1].end)))}}return e&&this.current--,t}andOperand(){let t=this.item();if(!(t instanceof c||t instanceof k||t instanceof T))return t;let e=t;for(;this.match(\",\");){let s=this.current-1,i=this.previous(),r=this.item(\"value\");if(null===r)return this.current--,t;if(this.current--,!this.match(n.WORD,n.QUOTED_TEXT,n.COMPLEX_VALUE,n.TEXT))return this.current=s,t;if(r instanceof f)return this.current-=3,t;if(e instanceof T)t.addAttributeFilter(r,i);else{if(r instanceof b)return this.current-=4,t;if(r.type=\"TEXT\"===r.type?\"TEXT\":\"Value\",e instanceof c)t.addAttribute(r,i);else if(e instanceof k){if(r instanceof g)return this.current-=3,t;let e=this.tokens[this.current];if(e.type===n.WORD){if(\"asc\"!==e.literal&&\"desc\"!==e.literal)return t.addValue(r,i),t;t.addValue(r,i,e),this.current++}else t.addValue(r,i)}}}return t}item(){let t=this.unary(arguments[0]||\"key\");if(null===t)return null;if(t.type!==n.WORD&&!(t instanceof l||t instanceof u||t instanceof d))return t.type=n.TEXT,t;if(t instanceof l)\"operator\"in t&&(\"#\"===t.operator.type?t=null!==t.right?new f(t.operator,t.right):new x(new o(\"TEXT\",this.str.substring(t.operator.begin,t.operator.end),this.str.substring(t.operator.begin,t.operator.end),t.operator.begin,t.operator.end)):\"-\"===t.operator.type&&(t=null!==t.right?t.right instanceof d?new p(t.operator,t.right):new g(t.operator,t.right):new x(new o(\"TEXT\",this.str.substring(t.operator.begin,t.operator.end),this.str.substring(t.operator.begin,t.operator.end),t.operator.begin,t.operator.end))));else if(this.match(r.COLON)){let e=this.previous();if(\"-\"===this.tokens[this.current].type){let s=this.current,i=this.advance(),r=this.unary();if(\"sort by\"===t.lexeme)return this.current=s,t;if(\"has\"===t.lexeme)t=new c(t,e,r,i);else if(this.match(\"..\")){let s=this.previous();if(this.isAtEnd())return this.current--,t=new T(new y(t),e,new g(i,r));let h=this.unary();if(h.type===n.WORD){let n=new b(r,s,h);t=new T(new y(t),e,new g(i,n))}else this.current-=2,t=new T(new y(t),e,new g(i,r))}else t=new T(new y(t),e,new g(i,r))}else{if(\"#\"===this.tokens[this.current].type)return t;if(this.isAtEnd())return new x(new o(\"TEXT\",this.str.substring(t.begin,e.end),this.str.substring(t.begin,e.end),t.begin,e.end));{let s=this.unary();s.type!==n.WORD&&s.type!==n.COMPLEX_VALUE&&this.error(\"Unexpected Value\\n\",s.begin);let i=!1;if(this.match(\"..\")){let r,h=this.previous(),o=this.current-1;if(this.isAtEnd())r=s,i=!0;else{let i=this.unary();if(i.type!==n.WORD)return this.current=o,\"sort by\"===t.lexeme?new k(t,e,s):\"has\"===t.lexeme?new c(t,e,s):new T(new y(t),e,s);r=new b(s,h,i)}if(\"has\"===t.lexeme)return this.current=o,new c(t,e,s);if(\"sort by\"===t.lexeme)return this.current=o,new k(t,e,s);if(t=new T(new y(t),e,r),i)return this.current=o,t}else s.type!==n.TEXT&&(s.type=\"QuotedText\"!==s.type?\"Value\":s.type),t=\"has\"===t.lexeme?new c(t,e,s):\"sort by\"===t.lexeme?\"asc\"===this.tokens[this.current].lexeme||\"desc\"===this.tokens[this.current].lexeme?new k(t,e,s,this.advance()):new k(t,e,s):new T(new y(t),e,s)}}}else{if(t instanceof d)return t;if(\"expr\"in t)return t;if(this.isAtEnd())return t;if(this.match(\"..\")){let e=this.current-1,s=this.previous(),i=this.unary();if(null!==i)return i.type===n.WORD?new b(t,s,i):(this.current=e,t);this.current=e}}return t}unary(){if(this.match(\"#\")||this.match(\"-\")){let t=this.previous(),e=\"key\"===arguments[0]?this.primary():this.item(\"value\");return null===e||e.type===n.WORD||e instanceof b||e instanceof d?new l(t,e):(this.current--,t)}return void 0!==arguments[0]?this.primary(arguments[0]):this.primary()}primary(){if(this.tokens[this.current].type===n.WORD&&\"key\"===arguments[0]){this.current++;let t=this.previous();t.lexeme.toUpperCase()in r&&this.error(\"Operator '\"+t.lexeme.toUpperCase()+\"' can not be key.\\n\",t.begin);for(;this.match(n.WORD);){if(this.previous().lexeme.toUpperCase()in r){this.current--;break}t.lexeme+=\" \"+this.previous().lexeme,t.literal+=\" \"+this.previous().literal,t.end=this.previous().end}return t}if(this.match(n.WORD,n.COMPLEX_VALUE)){let t=this.previous();return t.lexeme.toUpperCase()in r&&(t.type=\"TEXT\"),t}if(this.match('\"'))return new d(this.previous(),this.advance(),this.advance());if(this.match(n.TEXT))return new x(this.previous());if(this.match(r.LEFT_PAREN)){let t=this.previous(),e=this.getTree();this.check(r.RIGHT_PAREN)?this.advance():this.error(\"Missing ')' after expression:\\n\",this.str.length);let s=this.tokens[this.current-1];return new u(t,e,s)}return this.tokens.type!==n.WORD?this.advance():this.tokens[this.current-1].type!==r.LEFT_PAREN?this.advance():null}match(){for(let t=0;t<arguments.length;t++)if(this.check(arguments[t]))return this.advance(),!0;return!1}matchOperator(){for(let t=0;t<arguments.length;t++)if(this.checkOperator(arguments[t]))return this.advance(),!0;return!1}check(t){return!this.isAtEnd()&&this.peek().type===t}checkOperator(t){return!this.isAtEnd()&&this.peek().lexeme===t}advance(){return this.isAtEnd()?null:(this.current++,this.previous())}isAtEnd(){return this.peek().type===r.EOF}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}error(t,e){new h(t,e,this.str)}}},function(t,e,s){const i=s(12),r=s(13);t.exports=class{constructor(t){this.str=t,this.start=0,this.current=0,this.tokens=[]}scanTokens(){for(;!this.isAtEnd();)this.start=this.current,this.scanToken();return this.tokens.push(new r(i.EOF,\"\",null)),this.tokens}scanToken(){let t=this.advance();switch(!0){case/[(]/.test(t):this.current-1>0&&(\"-\"===this.tokens[this.tokens.length-1].type||\"#\"===this.tokens[this.tokens.length-1].type||\" \"!==this.str[this.current-2]&&\"(\"!==this.str[this.current-1])&&this.identifier(),this.addToken(i.LEFT_PAREN,\"(\",this.start,this.current);break;case/[)]/.test(t):this.addToken(i.RIGHT_PAREN,\")\",this.start,this.current);break;case/[{]/.test(t):{let t=this.stringBrace();this.addToken(\"COMPLEX_VALUE\",t,this.start,this.current);break}case/[\\-]/.test(t):this.current-1>0&&(\"-\"!==this.tokens[this.tokens.length-1].type&&\"#\"!==this.tokens[this.tokens.length-1].type||this.identifier()),this.addToken(\"-\",\"-\",this.start,this.current);break;case/[#]/.test(t):this.current-1>0&&(\"#\"!==this.tokens[this.tokens.length-1].type&&\"-\"!==this.tokens[this.tokens.length-1].type||this.identifier()),this.addToken(\"#\",\"#\",this.start,this.current);break;case/[\"]/.test(t):{this.addToken('\"','\"',this.start,this.current);let t=this.stringQuote();this.addToken(\"QUOTED_TEXT\",t,this.start,this.current),this.addToken('\"','\"',this.current-1,this.current);break}case/[:]/.test(t):this.addToken(\":\",\":\",this.start,this.current);break;case/[.]/.test(t):\".\"===this.str[this.current]?(this.advance(),this.addToken(\"..\",\"..\",this.start,this.current)):this.identifier();break;case/[,]/.test(t):this.addToken(\",\",\",\",this.start,this.current);break;case/[\\s]/.test(t):if(0===this.tokens.length){for(;/[\\s]/.test(this.str[this.current]);)this.current++;this.addToken(\"TEXT\",this.str.substring(this.start,this.current),this.start,this.current);break}this.tokens[this.tokens.length-1].end++;break;default:this.identifier()}}isAtEnd(){return this.current>=this.str.length}advance(){return this.current++,this.str[this.current-1]}addToken(t,e,s,i){void 0!==s?this.tokens.push(new r(t,e,e,s,i)):this.tokens.push(new r(t,e,e))}isDigit(t){return/[\\d]/.test(t)}peek(){return this.isAtEnd()?\"\\0\":this.str[this.current]}stringBrace(){for(;\"}\"!==this.peek()&&!this.isAtEnd();)this.advance();return this.advance(),this.str.substring(this.start+1,this.current-1)}stringQuote(){for(;'\"'!==this.peek()&&!this.isAtEnd();)this.advance();return this.advance(),this.str.substring(this.start+1,this.current-1)}isAlpha(t){return/[a-zA-Z_\\-*?.]/.test(t)}isText(t){return void 0!==t&&\"\\0\"!==t&&!/[\\s:,(){}\\-#.\"*?a-zA-Z_]/.test(t)}identifier(){if(this.isText(this.str[this.current-1])){for(;this.isText(this.peek())||this.isAlphaNumeric(this.peek());)this.advance();this.addToken(\"TEXT\",this.str.substring(this.start,this.current),this.start,this.current)}else{for(;this.isAlphaNumeric(this.peek());)this.advance();for(;/[\\s]/.test(this.str[this.current]);)this.advance();let t=this.str.substring(this.start,this.current);if(-1!==t.indexOf(\"..\")){let e=this.start+t.indexOf(\"..\");this.addToken(\"WORD\",this.str.substring(this.start,e).replace(/[\\s]/g,\"\"),this.start,e);let s=0;for(;\" \"===this.str[e+2+s];)s++;this.addToken(\"..\",\"..\",e,e+2+s),\"\"!==this.str.substring(e+2,this.current).replace(/[\\s]/g,\"\")&&this.addToken(\"WORD\",this.str.substring(e+2,this.current).replace(/[\\s]/g,\"\"),e+2,this.current)}else this.addToken(\"WORD\",this.str.substring(this.start,this.current).replace(/[\\s]/g,\"\"),this.start,this.current)}}isAlphaNumeric(t){return this.isDigit(t)||this.isAlpha(t)}}},function(t,e){t.exports=class extends SyntaxError{constructor(t,e,s){let i=\"\";for(let t=0;t<e;t++)i+=\" \";throw super(t+s+\"\\n\"+i+\"^\")}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e,s){super(\"QuotedText\",t.begin,s.end),this.leftQuote=t,this.lexeme=e.lexeme,this.literal=e.literal,this.begin=t.begin,this.end=s.end,this.rightQuote=s}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e){super(\"NegativeText\",t.begin,e.end),this.minus=t,this.text=e}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(\"TEXT\",t.begin,t.end),this.lexeme=t.lexeme,this.literal=t.literal}}},function(t,e){t.exports=class{constructor(t){this.field=t}get position(){if(this.pos=0,this.anchorNode=window.getSelection().anchorNode,this.offset=window.getSelection().anchorOffset,this.anchorNode.parentNode===this.field)this.pos=this.offset;else{let t=this.anchorNode;for(;t!==this.field;){for(;null!==t.previousSibling;)this.pos+=t.previousSibling.textContent.length,t=t.previousSibling;t=t.parentNode}this.pos+=this.offset}return this.pos}set position(t){let e=this.field,s=0,i=-1;for(;s<t&&3!==e.nodeType;)i++,null!==e.childNodes[i]&&(s+=e.childNodes[i].textContent.length)>=t&&(s-=(e=e.childNodes[i]).textContent.length,i=-1);document.getSelection().collapse(e,t-s)}}},function(t,e){t.exports=class{constructor(){this.undoStack=[],this.redoStack=[]}undo(){return 0===this.undoStack.length?-1:(this.redoStack.push(this.undoStack.pop()),this.undoStack[this.undoStack.length-1])}redo(){if(0===this.redoStack.length)return-1;let t=this.redoStack.pop();return this.undoStack.push(t),t}addState(t,e){this.undoStack.push({line:t,pos:e}),this.redoStack=[]}}}]);","extractedComments":[]}